(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"t3h/":function(t,e,n){"use strict";n.r(e),n.d(e,"TrainingModule",(function(){return X}));var i=n("ofXK"),r=n("tyNb"),a=n("fXoL"),c=n("J9tS"),s=n("wZkO"),o=n("hu7N"),l=n("3Pt+"),b=n("LRne"),u=n("XiUz"),m=n("Wp6s"),p=n("bTqV"),g=n("BESU");function d(t,e){if(1&t&&(a.Ub(0,"div"),a.Pb(1,"app-dynamic-form-input",8),a.Tb()),2&t){const t=e.$implicit,n=a.kc(2);a.Bb(1),a.Db(t.class),a.pc("inputs",t)("form",n.form)}}function f(t,e){if(1&t){const t=a.Vb();a.Ub(0,"section",1),a.Ub(1,"mat-card",2),a.Ub(2,"mat-card-title",3),a.Jc(3," Time to start a workout! "),a.Tb(),a.Ub(4,"mat-card-content",4),a.Ub(5,"form",5),a.Hc(6,d,2,4,"div",6),a.Tb(),a.Tb(),a.Ub(7,"mat-card-actions",3),a.Ub(8,"button",7),a.gc("click",(function(){return a.zc(t),a.kc().onStartTraining()})),a.Jc(9,"Start"),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&t){const t=a.kc();a.Bb(5),a.pc("formGroup",t.form),a.Bb(1),a.pc("ngForOf",t.inputs),a.Bb(2),a.pc("disabled",t.form.invalid)}}let h=(()=>{class t{constructor(t){this.dynFormCtrl=t,this.exercises=[],this.trainingStart=new a.o,this.inputs=[],this.class="w-100"}ngOnChanges({exercises:t}){t&&this.exercises&&(this.inputs$=(t=>{const e=this.exercises.map(t=>({key:t.id,value:t.name})),n=[new o.c({key:"newTraining",label:"Choose Exercise",required:!0,validators:[l.r.required],options:[...e],errorMessage:"Please select an exercise",class:"w-100",order:1})];return Object(b.a)(n.sort((t,e)=>t.order-e.order))})().subscribe(t=>{this.inputs=t,this.form=this.dynFormCtrl.toFormGroup(t)}))}onStartTraining(){const{newTraining:t}=this.form.value;this.trainingStart.emit({id:t})}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(c.b))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-new-training"]],inputs:{exercises:"exercises"},outputs:{trainingStart:"trainingStart"},features:[a.zb],decls:1,vars:1,consts:[["class","mt-4","fxLayout","","fxLayoutAlign","center",4,"ngIf"],["fxLayout","","fxLayoutAlign","center",1,"mt-4"],["fxLayout","column","fxFlex.xs","100%","fxFlex","500px"],["fxLayoutAlign","center"],["fxFlex","100%","fxLayoutAlign","center"],[1,"w-100",3,"formGroup"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"],[3,"inputs","form"]],template:function(t,e){1&t&&a.Hc(0,f,10,3,"section",0),2&t&&a.pc("ngIf",e.exercises.length)},directives:[i.n,u.c,u.b,m.a,u.a,m.e,m.c,l.t,l.m,l.g,i.m,m.b,p.a,g.a],styles:[""]}),t})();var T=n("M9IT"),S=n("Dh3D"),v=n("+0xr"),x=n("kmnG"),w=n("qFsG");function y(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.Jc(1," Date "),a.Tb())}function U(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.Jc(1),a.lc(2,"date"),a.Tb()),2&t){const t=e.$implicit;a.Bb(1),a.Kc(a.mc(2,1,t.date))}}function C(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.Jc(1," Name "),a.Tb())}function O(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.Jc(1),a.Tb()),2&t){const t=e.$implicit;a.Bb(1),a.Kc(t.name)}}function J(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.Jc(1," Calories "),a.Tb())}function D(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.Jc(1),a.lc(2,"number"),a.Tb()),2&t){const t=e.$implicit;a.Bb(1),a.Kc(a.mc(2,1,t.calories))}}function B(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.Jc(1," Duration "),a.Tb())}function k(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.Jc(1),a.lc(2,"number"),a.Tb()),2&t){const t=e.$implicit;a.Bb(1),a.Kc(a.mc(2,1,t.duration))}}function I(t,e){1&t&&(a.Ub(0,"mat-header-cell",14),a.Jc(1," State "),a.Tb())}function H(t,e){if(1&t&&(a.Ub(0,"mat-cell"),a.Jc(1),a.Tb()),2&t){const t=e.$implicit;a.Bb(1),a.Kc(t.state)}}function L(t,e){1&t&&a.Pb(0,"mat-header-row")}function P(t,e){1&t&&a.Pb(0,"mat-row")}const R=function(){return[1,5,10,20]};let F=(()=>{class t{constructor(t){this.trainingService=t,this.displayedColumns=["date","name","calories","duration","state"],this.dataSource=new v.k}ngOnInit(){this.dataSource.data=this.trainingService.getCompletedOrCancelledExercisers()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}doFilter(t){this.dataSource.filter=t.trim().toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(c.c))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-past-training"]],viewQuery:function(t,e){var n;1&t&&(a.Dc(S.a,!0),a.Dc(T.a,!0)),2&t&&(a.wc(n=a.hc())&&(e.sort=n.first),a.wc(n=a.hc())&&(e.paginator=n.first))},decls:25,vars:6,consts:[["appearance","fill",1,"w-100"],["matInput","","type","text",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["paginator",""],["mat-sort-header",""]],template:function(t,e){1&t&&(a.Ub(0,"mat-card"),a.Ub(1,"mat-form-field",0),a.Ub(2,"mat-label"),a.Jc(3,"Filter"),a.Tb(),a.Ub(4,"input",1),a.gc("keyup",(function(t){return e.doFilter(t.target.value)})),a.Tb(),a.Tb(),a.Ub(5,"mat-table",2),a.Sb(6,3),a.Hc(7,y,2,0,"mat-header-cell",4),a.Hc(8,U,3,3,"mat-cell",5),a.Rb(),a.Sb(9,6),a.Hc(10,C,2,0,"mat-header-cell",4),a.Hc(11,O,2,1,"mat-cell",5),a.Rb(),a.Sb(12,7),a.Hc(13,J,2,0,"mat-header-cell",4),a.Hc(14,D,3,3,"mat-cell",5),a.Rb(),a.Sb(15,8),a.Hc(16,B,2,0,"mat-header-cell",4),a.Hc(17,k,3,3,"mat-cell",5),a.Rb(),a.Sb(18,9),a.Hc(19,I,2,0,"mat-header-cell",4),a.Hc(20,H,2,1,"mat-cell",5),a.Rb(),a.Hc(21,L,1,0,"mat-header-row",10),a.Hc(22,P,1,0,"mat-row",11),a.Tb(),a.Pb(23,"mat-paginator",12,13),a.Tb()),2&t&&(a.Bb(5),a.pc("dataSource",e.dataSource),a.Bb(16),a.pc("matHeaderRowDef",e.displayedColumns),a.Bb(1),a.pc("matRowDefColumns",e.displayedColumns),a.Bb(1),a.pc("pageSize",1)("pageSizeOptions",a.sc(5,R)))},directives:[m.a,x.c,x.f,w.b,v.j,S.a,v.c,v.e,v.b,v.g,v.i,T.a,v.d,S.b,v.a,v.f,v.h],pipes:[i.e,i.f],styles:[""]}),t})();var E=n("0IaG");let M=(()=>{class t{constructor(t){this.passedData=t}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(E.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-stop-training-modal"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(a.Ub(0,"h1",0),a.Jc(1,"Are you sure?"),a.Tb(),a.Ub(2,"mat-dialog-content"),a.Ub(3,"p"),a.Jc(4),a.Tb(),a.Tb(),a.Ub(5,"mat-dialog-actions"),a.Ub(6,"button",1),a.Jc(7,"Yes"),a.Tb(),a.Ub(8,"button",1),a.Jc(9,"No"),a.Tb(),a.Tb()),2&t&&(a.Bb(4),a.Lc("You already got ",e.passedData.progress,"%"),a.Bb(2),a.pc("mat-dialog-close",!0),a.Bb(2),a.pc("mat-dialog-close",!1))},directives:[E.g,E.e,E.c,p.a,E.d],encapsulation:2}),t})();var G=n("Xa2L");let z=(()=>{class t{constructor(t,e){this.dialog=t,this.trainingService=e,this.progress=0}ngOnInit(){this.startOrResumeTimer()}startOrResumeTimer(){const t=this.trainingService.getRunningExercise().duration/100*1e3;this.timer=setInterval(()=>{this.progress=this.progress+5,this.progress>=100&&(this.trainingService.completeExercise(),clearInterval(this.timer))},t)}onStop(){clearInterval(this.timer),this.dialog.open(M,{data:{progress:this.progress}}).afterClosed().subscribe(t=>t?this.trainingService.cancelExercise(this.progress):this.startOrResumeTimer())}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(E.b),a.Ob(c.c))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"current-training-container"],["mode","determinate","color","primary",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(a.Ub(0,"section",0),a.Pb(1,"mat-progress-spinner",1),a.Ub(2,"h1"),a.Jc(3),a.Tb(),a.Ub(4,"p"),a.Jc(5,"Keep on going, you can do it!"),a.Tb(),a.Ub(6,"button",2),a.gc("click",(function(){return e.onStop()})),a.Jc(7,"Stop"),a.Tb(),a.Tb()),2&t&&(a.Bb(1),a.pc("value",e.progress),a.Bb(2),a.Lc("",e.progress,"%"))},directives:[u.c,u.b,G.a,p.a],styles:[".current-training-container[_ngcontent-%COMP%]{padding:30px}"]}),t})();function A(t,e){if(1&t){const t=a.Vb();a.Ub(0,"mat-tab-group"),a.Ub(1,"mat-tab",1),a.Ub(2,"app-new-training",2),a.gc("trainingStart",(function(e){return a.zc(t),a.kc().onTrainingStart(e)})),a.Tb(),a.Tb(),a.Ub(3,"mat-tab",3),a.Pb(4,"app-past-training"),a.Tb(),a.Tb()}if(2&t){const t=a.kc();a.Bb(2),a.pc("exercises",t.availableExercises)}}function K(t,e){1&t&&a.Pb(0,"app-current-training")}const $=[{path:"",component:(()=>{class t{constructor(t){this.trainingService=t}ngOnInit(){this.availableExercises=this.trainingService.getAvailableExercises(),this.exerciseSubscription=this.trainingService.exerciseChanged.subscribe(t=>{this.onGoindTraining=!!t})}ngOnDestroy(){this.exerciseSubscription.unsubscribe()}onTrainingStart({id:t}){this.trainingService.startExercise(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(c.c))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-training"]],decls:2,vars:2,consts:[[4,"ngIf"],["label","New Exercise"],[3,"exercises","trainingStart"],["label","Past Exercises"]],template:function(t,e){1&t&&(a.Hc(0,A,5,1,"mat-tab-group",0),a.Hc(1,K,1,0,"app-current-training",0)),2&t&&(a.pc("ngIf",!e.onGoindTraining),a.Bb(1),a.pc("ngIf",e.onGoindTraining))},directives:[i.n,s.b,s.a,h,F,z],styles:[".training-container[_ngcontent-%COMP%]{height:100%}.training-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .training-container[_ngcontent-%COMP%]   mat-tab-link[_ngcontent-%COMP%]:hover{text-decoration:none}"]}),t})()}];let _=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},imports:[[r.e.forChild($)],r.e]}),t})();var N=n("FpXt");let X=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(e){return new(e||t)},providers:[c.c],imports:[[i.c,_,N.a]]}),t})()}}]);