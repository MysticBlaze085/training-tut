(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"t3h/":function(t,e,i){"use strict";i.r(e),i.d(e,"TrainingModule",(function(){return j}));var n=i("ofXK"),a=i("tyNb"),r=i("fXoL"),c=i("J9tS"),s=i("wZkO"),o=i("hu7N"),l=i("3Pt+"),b=i("LRne"),u=i("XiUz"),m=i("Wp6s"),p=i("bTqV"),d=i("BESU");function f(t,e){if(1&t&&(r.Ub(0,"div"),r.Pb(1,"app-dynamic-form-input",8),r.Tb()),2&t){const t=e.$implicit,i=r.kc(2);r.Bb(1),r.Db(t.class),r.pc("inputs",t)("form",i.form)}}function g(t,e){if(1&t){const t=r.Vb();r.Ub(0,"section",1),r.Ub(1,"mat-card",2),r.Ub(2,"mat-card-title",3),r.Jc(3," Time to start a workout! "),r.Tb(),r.Ub(4,"mat-card-content",4),r.Ub(5,"form",5),r.Hc(6,f,2,4,"div",6),r.Tb(),r.Tb(),r.Ub(7,"mat-card-actions"),r.Ub(8,"button",7),r.gc("click",(function(){return r.zc(t),r.kc().onStartTraining()})),r.Jc(9,"Start"),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.kc();r.Bb(5),r.pc("formGroup",t.form),r.Bb(1),r.pc("ngForOf",t.inputs),r.Bb(2),r.pc("disabled",t.form.invalid)}}let h=(()=>{class t{constructor(t){this.dynFormCtrl=t,this.exercises=[],this.trainingStart=new r.o,this.inputs=[],this.class="w-100"}ngOnChanges({exercises:t}){t&&this.exercises&&(this.inputs$=(t=>{const e=this.exercises.map(t=>({key:t.id,value:t.name})),i=[new o.c({key:"newTraining",label:"Choose Exercise",required:!0,validators:[l.r.required],options:[...e],errorMessage:"Please select an exercise",class:"w-100",order:1})];return Object(b.a)(i.sort((t,e)=>t.order-e.order))})().subscribe(t=>{this.inputs=t,this.form=this.dynFormCtrl.toFormGroup(t)}))}onStartTraining(){const{newTraining:t}=this.form.value;this.trainingStart.emit({id:t})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c.b))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-new-training"]],inputs:{exercises:"exercises"},outputs:{trainingStart:"trainingStart"},features:[r.zb],decls:1,vars:1,consts:[["fxLayout","","fxLayoutAlign","center",4,"ngIf"],["fxLayout","","fxLayoutAlign","center"],["fxLayout","column","fxFlex.xs","100%","fxFlex","500px",1,"mt-3","mb-3"],["fxLayoutAlign","center"],["fxLayout","column","fxFlex","100%","fxLayoutAlign","center"],[1,"w-100",3,"formGroup"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"],[3,"inputs","form"]],template:function(t,e){1&t&&r.Hc(0,g,10,3,"section",0),2&t&&r.pc("ngIf",e.exercises.length)},directives:[n.n,u.c,u.b,m.a,u.a,m.e,m.c,l.t,l.m,l.g,n.m,m.b,p.a,d.a],styles:[""]}),t})();var T=i("M9IT"),S=i("Dh3D"),y=i("+0xr"),x=i("kmnG"),v=i("qFsG");function w(t,e){1&t&&(r.Ub(0,"mat-header-cell",15),r.Jc(1," Date "),r.Tb())}function U(t,e){if(1&t&&(r.Ub(0,"mat-cell"),r.Jc(1),r.lc(2,"date"),r.Tb()),2&t){const t=e.$implicit;r.Bb(1),r.Kc(r.mc(2,1,t.date))}}function C(t,e){1&t&&(r.Ub(0,"mat-header-cell",15),r.Jc(1," Name "),r.Tb())}function J(t,e){if(1&t&&(r.Ub(0,"mat-cell"),r.Jc(1),r.Tb()),2&t){const t=e.$implicit;r.Bb(1),r.Kc(t.name)}}function D(t,e){1&t&&(r.Ub(0,"mat-header-cell",15),r.Jc(1," Calories "),r.Tb())}function H(t,e){if(1&t&&(r.Ub(0,"mat-cell"),r.Jc(1),r.lc(2,"number"),r.Tb()),2&t){const t=e.$implicit;r.Bb(1),r.Kc(r.mc(2,1,t.calories))}}function B(t,e){1&t&&(r.Ub(0,"mat-header-cell",15),r.Jc(1," Duration "),r.Tb())}function I(t,e){if(1&t&&(r.Ub(0,"mat-cell"),r.Jc(1),r.lc(2,"number"),r.Tb()),2&t){const t=e.$implicit;r.Bb(1),r.Kc(r.mc(2,1,t.duration))}}function O(t,e){1&t&&(r.Ub(0,"mat-header-cell",15),r.Jc(1," State "),r.Tb())}function k(t,e){if(1&t&&(r.Ub(0,"mat-cell"),r.Jc(1),r.Tb()),2&t){const t=e.$implicit;r.Bb(1),r.Kc(t.state)}}function L(t,e){1&t&&r.Pb(0,"mat-header-row")}function R(t,e){1&t&&r.Pb(0,"mat-row")}const F=function(){return[1,5,10,20]};let E=(()=>{class t{constructor(t){this.trainingService=t,this.displayedColumns=["date","name","calories","duration","state"],this.dataSource=new y.k}ngOnInit(){this.dataSource.data=this.trainingService.getCompletedOrCancelledExercisers()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}doFilter(t){this.dataSource.filter=t.trim().toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c.c))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-past-training"]],viewQuery:function(t,e){var i;1&t&&(r.Dc(S.a,!0),r.Dc(T.a,!0)),2&t&&(r.wc(i=r.hc())&&(e.sort=i.first),r.wc(i=r.hc())&&(e.paginator=i.first))},decls:25,vars:6,consts:[[1,"mt-3","mb-3"],["appearance","fill",1,"w-100"],["matInput","","type","text",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","date"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["matColumnDef","calories"],["matColumnDef","duration"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["paginator",""],["mat-sort-header",""]],template:function(t,e){1&t&&(r.Ub(0,"mat-card",0),r.Ub(1,"mat-form-field",1),r.Ub(2,"mat-label"),r.Jc(3,"Filter"),r.Tb(),r.Ub(4,"input",2),r.gc("keyup",(function(t){return e.doFilter(t.target.value)})),r.Tb(),r.Tb(),r.Ub(5,"mat-table",3),r.Sb(6,4),r.Hc(7,w,2,0,"mat-header-cell",5),r.Hc(8,U,3,3,"mat-cell",6),r.Rb(),r.Sb(9,7),r.Hc(10,C,2,0,"mat-header-cell",5),r.Hc(11,J,2,1,"mat-cell",6),r.Rb(),r.Sb(12,8),r.Hc(13,D,2,0,"mat-header-cell",5),r.Hc(14,H,3,3,"mat-cell",6),r.Rb(),r.Sb(15,9),r.Hc(16,B,2,0,"mat-header-cell",5),r.Hc(17,I,3,3,"mat-cell",6),r.Rb(),r.Sb(18,10),r.Hc(19,O,2,0,"mat-header-cell",5),r.Hc(20,k,2,1,"mat-cell",6),r.Rb(),r.Hc(21,L,1,0,"mat-header-row",11),r.Hc(22,R,1,0,"mat-row",12),r.Tb(),r.Pb(23,"mat-paginator",13,14),r.Tb()),2&t&&(r.Bb(5),r.pc("dataSource",e.dataSource),r.Bb(16),r.pc("matHeaderRowDef",e.displayedColumns),r.Bb(1),r.pc("matRowDefColumns",e.displayedColumns),r.Bb(1),r.pc("pageSize",1)("pageSizeOptions",r.sc(5,F)))},directives:[m.a,x.c,x.f,v.b,y.j,S.a,y.c,y.e,y.b,y.g,y.i,T.a,y.d,S.b,y.a,y.f,y.h],pipes:[n.e,n.f],styles:[""]}),t})();var P=i("0IaG");let G=(()=>{class t{constructor(t){this.passedData=t}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(P.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-stop-training-modal"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(t,e){1&t&&(r.Ub(0,"h1",0),r.Jc(1,"Are you sure?"),r.Tb(),r.Ub(2,"mat-dialog-content"),r.Ub(3,"p"),r.Jc(4),r.Tb(),r.Tb(),r.Ub(5,"mat-dialog-actions"),r.Ub(6,"button",1),r.Jc(7,"Yes"),r.Tb(),r.Ub(8,"button",1),r.Jc(9,"No"),r.Tb(),r.Tb()),2&t&&(r.Bb(4),r.Lc("You already got ",e.passedData.progress,"%"),r.Bb(2),r.pc("mat-dialog-close",!0),r.Bb(2),r.pc("mat-dialog-close",!1))},directives:[P.g,P.e,P.c,p.a,P.d],encapsulation:2}),t})();var z=i("Xa2L");let A=(()=>{class t{constructor(t,e){this.dialog=t,this.trainingService=e,this.progress=0}ngOnInit(){this.startOrResumeTimer()}startOrResumeTimer(){const t=this.trainingService.getRunningExercise().duration/100*1e3;this.timer=setInterval(()=>{this.progress=this.progress+5,this.progress>=100&&(this.trainingService.completeExercise(),clearInterval(this.timer))},t)}onStop(){clearInterval(this.timer),this.dialog.open(G,{data:{progress:this.progress}}).afterClosed().subscribe(t=>t?this.trainingService.cancelExercise(this.progress):this.startOrResumeTimer())}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(P.b),r.Ob(c.c))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-current-training"]],decls:8,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"mt-3","mb-3"],["mode","determinate","color","primary",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(r.Ub(0,"section",0),r.Pb(1,"mat-progress-spinner",1),r.Ub(2,"h1"),r.Jc(3),r.Tb(),r.Ub(4,"p"),r.Jc(5,"Keep on going, you can do it!"),r.Tb(),r.Ub(6,"button",2),r.gc("click",(function(){return e.onStop()})),r.Jc(7,"Stop"),r.Tb(),r.Tb()),2&t&&(r.Bb(1),r.pc("value",e.progress),r.Bb(2),r.Lc("",e.progress,"%"))},directives:[u.c,u.b,z.a,p.a],styles:[""]}),t})();function K(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-tab-group",2),r.Ub(1,"mat-tab",3),r.Ub(2,"app-new-training",4),r.gc("trainingStart",(function(e){return r.zc(t),r.kc().onTrainingStart(e)})),r.Tb(),r.Tb(),r.Ub(3,"mat-tab",5),r.Pb(4,"app-past-training"),r.Tb(),r.Tb()}if(2&t){const t=r.kc();r.pc("dynamicHeight",!0),r.Bb(2),r.pc("exercises",t.availableExercises)}}function $(t,e){1&t&&r.Pb(0,"app-current-training")}const M=[{path:"",component:(()=>{class t{constructor(t){this.trainingService=t}ngOnInit(){this.availableExercises=this.trainingService.getAvailableExercises(),this.exerciseSubscription=this.trainingService.exerciseChanged.subscribe(t=>{this.onGoindTraining=!!t})}ngOnDestroy(){this.exerciseSubscription.unsubscribe()}onTrainingStart({id:t}){this.trainingService.startExercise(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c.c))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-training"]],decls:2,vars:2,consts:[[3,"dynamicHeight",4,"ngIf"],[4,"ngIf"],[3,"dynamicHeight"],["label","New Exercise"],[3,"exercises","trainingStart"],["label","Past Exercises"]],template:function(t,e){1&t&&(r.Hc(0,K,5,2,"mat-tab-group",0),r.Hc(1,$,1,0,"app-current-training",1)),2&t&&(r.pc("ngIf",!e.onGoindTraining),r.Bb(1),r.pc("ngIf",e.onGoindTraining))},directives:[n.n,s.b,s.a,h,E,A],styles:[""]}),t})()}];let N=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(M)],a.e]}),t})();var X=i("FpXt");let j=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},providers:[c.c],imports:[[n.c,N,X.a]]}),t})()}}]);